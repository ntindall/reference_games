
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../../lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="theme.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

<h2><center>The target locating game!</center>  </h2>

	<p>

	  In this experiment you will play a fun communication game with
	  another turker! In each round both of you are going to be shown a city map like this:
</p>
    <p>
      <center><img src="images/screenshot_objs.png" alt="Example objects" style="width:600px; height:374px"></center>
    </p>

<p>

    One of you will be assigned the <b> Speaker </b> role and the other will be
    the <b> Listener </b>. For each round, a special Lily flower is going to grow somewhere in the city, and only
    the speaker can see where the Lily is located. The task of the speaker
    is to tell the listener where the Lily grew and the listener in turn needs to click somewhere on the map where they believe the Lily is
    based on this information provided by the speaker.
</p>

<p>
      <center><img src="images/screenshot_speaker.png" alt="Example gameplay" style="width:600px; height:374px"></center>
    </p>
<p>
    <i> <center> <small> Only the speaker can see where the Lily is on the map. </small> </center> </i>

</p>
<p>
  The task of the listener to identify the correct location on the map based on
    what the speaker has said. In order to communicate, you're given a
    chatbox where you can send messages back and forth to each
    other. The speaker can say whatever they need to indicate where the Lily is, and the listener is free to ask for
    clarifications if what the speaker said is not clear. Some rounds
    will be easier and some will be harder. </p>

    <p> Once the speaker sends a message and the listener clicks on
    the object they believe is the target, both players will be <b>
    given feedback </b> (the speaker will see what the listener
    clicked, and the listener will see the true location of the Lily), and you will
    both be automatically forwarded to the next round. You
    will <b>both</b> get a 1 cent bonus for each round where the listener
    correctly locates the Lily, for a total of <b>50
    rounds</b>. Bonus does not increase with accuracy, you must only make the player click near the lily. After the final round you will fill out a quick 15
    second survey and be on your way.
</p>

<p> A few final notes: First, since you are playing with another
  turker, you may see this screen before the game begins:
  <p>
    <center><img src="images/waitScreen.png" alt="initial matcher's board" style="width:700px;height:150px"></center>
  </p>
  Just hold tight. Another turker should join the game within the next
  few minutes. If you're in the waiting room 15 minutes without
  another player joining, your HIT will automatically be submitted and
  accepted, out of gratitude for the time you spent waiting.
</p>

<p> Second, please be respectful of the turker you're playing with:
  they're real people, so do not send rude or inappropriate material
  through the chat box (including links or screenshots), and try to be
  as fast and responsive as possible to respect your partner's time:
  it can be very frustrating if your partner suddenly disappears and
  makes the task longer than anticipated. If your partner disconnects
  in the middle of the game, you will be sent to the survey and
  allowed to submit the HIT for full compensation.
</p>

<p> Finally, please DO NOT refresh the page at any point once you
  start the game (including the waiting page). If you refresh, you
  will not be able to rejoin the game you were in and you may not be
  able to submit the HIT. <br> Thank you!
</p>

<h4>
    Please fill out this short quiz below before getting started.
    Good luck and have fun!
</h4>






      </div>
      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

     <div class="well" style="width:800px; margin: 0 auto">

  </br>
  The speaker can click on a map location to end the round.
    </br>
    <input type="radio" name="dgoal" value="yes"> False
    </br>
    <input type="radio" name="dgoal" value="no"> True
    </br>


  </br>
  The listener wants to click on the location that the speaker is
  telling them about.
      </br>
      <input type="radio" name="mgoal" value="no"> False
      </br>
      <input type="radio" name="mgoal" value="yes"> True
      </br>


  </br>
  Only the speaker can send messages.
      </br>
      <input type="radio" name="message" value="yes"> False
      </br>
      <input type="radio" name="message" value="no"> True
      </br>

  </br>
  There are a total of 200 rounds.
      </br>
      <input type="radio" name="comp" value="no"> True
      </br>
      <input type="radio" name="comp" value="yes"> False
      </br>

  </br>
  The locations of the Lily are the same for the speaker and the listener.
      </br>
      <input type="radio" name="location" value="yes"> True
      </br>
      <input type="radio" name="location" value="no"> False
      </br>

  </br>
  Have you participated in this study before?
        </br>
        <input type="radio" name="completed" value="no"> Yes
        </br>
        <input type="radio" name="completed" value="yes"> No
        </br>

  </br>
    <input id="quiz_submit" type="submit" value="Submit">
      </br>
      </br>
  <div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="round"]:checked').val();
        var ans4 = $('input[name="message"]:checked').val();
        var ans5 = $('input[name="comp"]:checked').val();
        var ans6 = $('input[name="location"]:checked').val();
        var ans7 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes" && ans7 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="../../lib/js/bootstrap.min.js"></script>
  </body>
</html>
